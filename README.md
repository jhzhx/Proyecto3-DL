# Proyecto II: Diseño digital en HDL
### Jiahui Zhong Xie
### Ximena Araya Brenes 
## 1. Introducción
El proyecto consiste en la implementación del diseño sincrónico a través de una FPGA (Field Programmable Gate Array), en este caso la Tang Nano 9k, y HDL (Hardware Description Language) SystemVerilog. El sistema diseñado se trata de un teclado hexadecimal que recibe dos números enteros positivos de tres dígitos como máximo cada uno, los cuales se dividen de manera interna y cuyo resultado es desplegado en un display de 7 segmentos. Además, este mismo al estar compuesto por cociente y por residuo, son desplegados en orden, mediante el uso de un botón. Para este proyecto, se implementaron varios principios del diseño digital, como lo es la eliminación de rebotes (debouncer), el uso de una máquina de estados finitos (FSM), conversión de binario a BCD, entre otros. 
## 2. Objetivos
El problema principal por resolver es la implementación tanto física como lógica de un divisor simple de tres dígitos, mediante un teclado hezadecimal y un display de 7 segmentos, así como botones que permitan desplegar tanto el cociente como el residuo, el cual opera a la frecuencia de reloj de la FPGA (27MHz). 
El objetivo principal es el desarrollo de un sistema digital utilizando Hardware Description Language, en este caso, la implementación de algoritmos por medio de máquinas de estado complejas. Los objetivos específicos consisten en implementar diseño digital en una FPGA, construir un testbench que permita comprobar las especificaciones requeridas, implementar un algoritmo de división de enteros con una máquina de estados finitos. Así como, trabajar en la coordinación de trabajo en equipo y planificar tareas para trabajos. 
## 3. Funcionamiento del circuito y subsistemas
El circuito de manera general, consiste en un teclado hexadecimal, un display de 7 segmentos de 4 dígitos de cátodo común, así como de elementos resistivos y transistores BJT de tipo NPN. En primer lugar, el teclado hexadecimal se encuentra conectado directamente a los pines de la FPGA, a excepción de las filas, las cuales cuentan con una resistencia de regulación. Posteriormente, el display se encuentra conectado a una resistencia que proteje a la FPGA antes de los pines, además, los pines encargados de controlar la activación de cada dígito son regulados a manera de "switch" mediante un transistor BJT. Finalmente, para este diseño se implementaron botones que permiten realizar operaciones a través de la FPGA. La lógica consiste en el escaneo del teclado matricial para determinar qué tecla fue presionar, es decir, el usuario puede ingresar un dividendo y un divisor, luego se realiza la división de manera iterativa, se convierte el resultado a BCD y el resultado, tanto cociente como residuo. 
### 3.1 Subsistema de lectura del teclado mecánico hexadecimal
Primero se realiza un "barrido" de las columnas y filas para determinar que teclas fueron presionadas, luego el debouncer se encarga de verificar que no se generen rebotes, es decir, que los pulsos sean correctos y finalmente, convierte las convierte a señales lógicas. EN este caso, se controla mediante una FSM en el momento en el que los dígitos son ingresados, tanto del dividendo y el divisor. Las saildas de este subsistema consisten en: dividendo, divisor y start_division. 
### 3.2 Subsistema de división iterativa de los datos
En este subsistema se ejecuta la lógica iterativa de división, es decir, se reciben tanto el dividendo como el divisor, se realiza la división N cantidad de iteraciones. Lo cual produce el residuo y el cociente, finalmente, se indica que la división ya fue realizada. El funcionamiento del algoritmo se muestra en la imagen a continuación: 
![Algoritmo de división iterativo](ima/algoritmo.PNG)
### 3.3 Subsistema de conversión binaria a BCD 
Este último se encarga de recibir los datos en formato BCD y mostrarlos en el display de 7 segmentos, para ello, en el primer módulo se indica que número debe mostrarse, luego se decodifica para poder ser representado en los siete segmentos (a-g) de manera correspondiente, por último el multiplexor se encarga de activar un display a la vez. 
